# üéâ –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π - –†–µ–∑—é–º–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 11 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:****–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

---

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –°–∏—Å—Ç–µ–º–∞ –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

- **–ê–¥–º–∏–Ω —É—Ä–æ–≤–Ω—è 1** (—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É–ø—Ä–∞–≤–ª—è—é—â–∏–π):
  - –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –æ–ø–µ—Ä–∞—Ü–∏—è–º
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞–º–∏ —Å—Ä–µ–¥—Å—Ç–≤
  - Email: `admin@example.com` | –ü–∞—Ä–æ–ª—å: `password123`

- **–ê–¥–º–∏–Ω —É—Ä–æ–≤–Ω—è 2** (–æ–±—ã—á–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä):
  - –ë–ï–ó –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∏–Ω–∞–Ω—Å–∞–º
  - –î–æ—Å—Ç—É–ø –∫ –¥—Ä—É–≥–∏–º —Ñ—É–Ω–∫—Ü–∏—è–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
  - Email: `admin2@example.com` | –ü–∞—Ä–æ–ª—å: `password123`

- **–û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**:
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ø–æ–ª–Ω—è—Ç—å —Å–≤–æ—é –∫–∞—Ä—Ç—É –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
  - –û–ø–ª–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π —Å –∫–∞—Ä—Ç—ã
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### 2. API –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞—Ä—Ç—ã (Card Top-Up System)

**Endpoints:**
- `POST /api/card/topup` - –ø–æ–ø–æ–ª–Ω–∏—Ç—å –∫–∞—Ä—Ç—É
- `GET /api/card/balance/:userId` - –ø–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å
- `GET /api/card/transactions/:userId` - –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `GET /api/card/topups/:userId` - –∏—Å—Ç–æ—Ä–∏—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:**
- –ö—Ä–µ–¥–∏—Ç–Ω–∞—è/–¥–µ–±–µ—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞
- PayPal
- –ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥
- –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞

### 3. API –¥–ª—è –æ–ø–ª–∞—Ç—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (Booking Payment System)

**Endpoints:**
- `POST /api/bookings/:bookingId/pay-from-card` - –æ–ø–ª–∞—Ç–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–∞—Ä—Ç—ã
- `GET /api/bookings/:bookingId/payment-status` - —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã
3. –ï—Å–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ - —Å–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ–Ω—å–≥–∏ —Å –∫–∞—Ä—Ç—ã
4. –î–µ–Ω—å–≥–∏ –ø–æ—Å—Ç—É–ø–∞—é—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É (—É—Ä–æ–≤–µ–Ω—å 1)
5. –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "confirmed"

### 4. API –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (Admin Finance System)

**Endpoints:**
- `GET /api/admin/finances/summary` - —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–≤–æ–¥–∫–∞
- `GET /api/admin/finances/transactions` - –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `POST /api/admin/finances/withdrawal` - –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥
- `GET /api/admin/finances/withdrawals` - —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤—ã–≤–æ–¥

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –æ–±—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞–º–∏ —Å—Ä–µ–¥—Å—Ç–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º

### 5. Frontend Components

**CardTopUpScreen** (`src/screens/CardTopUpScreen.js`):
- –ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—É–º–º—ã (100, 500, 1000, 5000, 10000‚ÇΩ)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–≤–µ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—É—é —Å—É–º–º—É
- –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**AdminFinanceDashboard** (`src/screens/AdminFinanceDashboard.js`):
- –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
- –í–∫–ª–∞–¥–∫–∏: —Å–≤–æ–¥–∫–∞, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≤—ã–≤–æ–¥—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
- –ò—Å—Ç–æ—Ä–∏–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### 6. Context & Services

**PaymentContext** (`src/context/PaymentContext.js`):
- `topUpCard()` - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
- `getCardBalance()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- `getTransactionHistory()` - –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `payBookingFromCard()` - –æ–ø–ª–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `getBookingPaymentStatus()` - —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞

**Updated CheckoutScreen**:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤–æ–π –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PaymentContext –¥–ª—è –æ–ø–ª–∞—Ç—ã
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 7. Database Migrations

**–ú–∏–≥—Ä–∞—Ü–∏—è 005** (`server/migrations/005_payment_system.sql`):
- –¢–∞–±–ª–∏—Ü–∞ `card_topups` - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞—Ä—Ç
- –¢–∞–±–ª–∏—Ü–∞ `payments` - –ø–ª–∞—Ç–µ–∂–∏
- –¢–∞–±–ª–∏—Ü–∞ `admin_wallets` - –∫–æ—à–µ–ª—å–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –¢–∞–±–ª–∏—Ü–∞ `admin_transactions` - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –¢–∞–±–ª–∏—Ü–∞ `withdrawal_requests` - –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—ã–≤–æ–¥
- –ü–æ–ª–µ `admin_level` –≤ —Ç–∞–±–ª–∏—Ü–µ users
- Views –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### 8. Database Models

–î–æ–±–∞–≤–ª–µ–Ω—ã Sequelize –º–æ–¥–µ–ª–∏:
- `CardTopUp` - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
- `Payment` - –ø–ª–∞—Ç–µ–∂–∏
- `AdminWallet` - –∫–æ—à–µ–ª—å–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- `AdminTransaction` - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- `WithdrawalRequest` - –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—ã–≤–æ–¥

### 9. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è:
- 2 –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—É—Ä–æ–≤–µ–Ω—å 1 –∏ 2)
- 2 –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –±–∞–ª–∞–Ω—Å–æ–º –∫–∞—Ä—Ç
- 4 –∫–∞—Ä—Ç—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
- 4 –æ–±—ä–µ–∫—Ç–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
- 3 –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### 10. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**PAYMENT_SYSTEM.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –°—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü–æ—Ç–æ–∫–∏ —Ä–∞–±–æ—Ç—ã
- Curl –ø—Ä–∏–º–µ—Ä—ã
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    React Native Mobile App          ‚îÇ
‚îÇ  (CardTopUpScreen, CheckoutScreen,  ‚îÇ
‚îÇ   AdminFinanceDashboard)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ HTTP API
               ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Express.js Backend Server        ‚îÇ
‚îÇ  (Payment API Endpoints)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ ORM (Sequelize)
               ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    PostgreSQL Database              ‚îÇ
‚îÇ  (loyalty_cards, payments,          ‚îÇ
‚îÇ   admin_wallets, transactions)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ —Ä–∞–±–æ—Ç—ã

### 1Ô∏è. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
```
User ‚Üí CardTopUpScreen ‚Üí POST /api/card/topup ‚Üí 
LoyaltyCard.balance‚Üë ‚Üí Transaction created ‚úÖ
```

### 2Ô∏è. –û–ø–ª–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```
User ‚Üí CheckoutScreen ‚Üí POST /api/bookings/{id}/pay-from-card ‚Üí
LoyaltyCard.balance‚Üì ‚Üí Payment created ‚Üí AdminWallet.balance‚Üë ‚Üí
AdminTransaction created ‚Üí Booking.status='confirmed' ‚úÖ
```

### 3Ô∏è. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
```
Admin ‚Üí AdminFinanceDashboard ‚Üí GET /api/admin/finances/summary ‚Üí
View balance & statistics ‚Üí POST /api/admin/finances/withdrawal ‚Üí
WithdrawalRequest created ‚úÖ
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### Backend
```
server/
‚îú‚îÄ‚îÄ index.js                          (–æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤—ã–º–∏ models –∏ endpoints)
‚îî‚îÄ‚îÄ migrations/
    ‚îî‚îÄ‚îÄ 005_payment_system.sql        (–Ω–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è)
```

### Frontend
```
src/
‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îî‚îÄ‚îÄ PaymentContext.js             (–æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏)
‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îú‚îÄ‚îÄ CardTopUpScreen.js            (–Ω–æ–≤—ã–π —ç–∫—Ä–∞–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ AdminFinanceDashboard.js      (–Ω–æ–≤—ã–π —ç–∫—Ä–∞–Ω)
‚îÇ   ‚îî‚îÄ‚îÄ CheckoutScreen.js             (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îî‚îÄ‚îÄ PAYMENT_SYSTEM.md                 (–Ω–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–µ–¥ —Å–ø–∏—Å–∞–Ω–∏–µ–º
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (adminLevel)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º –ø–ª–∞—Ç–µ–∂–µ–π

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- üîí JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö endpoints
- üîí –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Stripe/PayPal
- üîí –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- üîí –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- üîí Rate limiting –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö endpoint'–∞—Ö
- üîí PCI DSS compliance

---

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–ü–æ–ø–æ–ª–Ω–∏—Ç—å –∫–∞—Ä—Ç—É:**
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ CardTopUpScreen
   - –í—ã–±—Ä–∞—Ç—å —Å—É–º–º—É –∏–ª–∏ –≤–≤–µ—Å—Ç–∏ —Å–≤–æ—é
   - –í—ã–±—Ä–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å

2. **–û–ø–ª–∞—Ç–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ù–∞ CheckoutScreen –Ω–∞–∂–∞—Ç—å "–û–ø–ª–∞—Ç–∏—Ç—å —Å –∫–∞—Ä—Ç—ã"
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ —Å—á–µ—Ç–∞
   - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è

3. **–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é:**
   - GET /api/card/transactions/:userId
   - GET /api/card/topups/:userId

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—É—Ä–æ–≤–µ–Ω—å 1):

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–Ω–∞–Ω—Å—ã:**
   - –û—Ç–∫—Ä—ã—Ç—å AdminFinanceDashboard
   - –í–∏–¥–Ω–∞ —Å–≤–æ–¥–∫–∞ –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º

2. **–ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–≤–æ–¥:**
   - –ù–∞–∂–∞—Ç—å "–í—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞"
   - –í–≤–µ—Å—Ç–∏ —Å—É–º–º—É –∏ –Ω–æ–º–µ—Ä —Å—á–µ—Ç–∞
   - –ó–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞–Ω

3. **–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é:**
   - GET /api/admin/finances/transactions
   - GET /api/admin/finances/withdrawals

---

## –ü—Ä–∏–º–µ—Ä—ã API –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–æ–ø–æ–ª–Ω–∏—Ç—å –∫–∞—Ä—Ç—É –Ω–∞ 5000‚ÇΩ:
```bash
curl -X POST http://localhost:5002/api/card/topup \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "user1-id",
    "amount": 5000,
    "paymentMethod": "card"
  }'
```

### –û–ø–ª–∞—Ç–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
curl -X POST http://localhost:5002/api/bookings/1/pay-from-card \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "user1-id"
  }'
```

### –ü–æ–ª—É—á–∏—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é —Å–≤–æ–¥–∫—É:
```bash
curl "http://localhost:5002/api/admin/finances/summary?userId=admin-user"
```

### –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤:
```bash
curl -X POST http://localhost:5002/api/admin/finances/withdrawal \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "admin-user",
    "amount": 50000,
    "bankAccount": "40817810123456789012",
    "reason": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥"
  }'
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π):**
- Email: `admin@example.com`
- Password: `password123`
- adminLevel: 1

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1:**
- Email: `user1@example.com`
- Password: `password123`
- –ë–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã: 500‚ÇΩ

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2:**
- Email: `user2@example.com`
- Password: `password123`
- –ë–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã: 1000‚ÇΩ

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **API Endpoints:** 11 –Ω–æ–≤—ã—Ö endpoint'–æ–≤
- **Database Models:** 5 –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
- **Frontend Screens:** 2 –Ω–æ–≤—ã—Ö —ç–∫—Ä–∞–Ω–∞
- **Lines of Code:** ~2500+ —Å—Ç—Ä–æ–∫
- **Database Tables:** 6 –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
- **Documentation:** –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## –í—ã–≤–æ–¥—ã

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Loyalty App:

‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –º–æ–≥—É—Ç –ø–æ–ø–æ–ª–Ω—è—Ç—å –∫–∞—Ä—Ç—É –∏ –æ–ø–ª–∞—á–∏–≤–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è  
‚úÖ **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —É—Ä–æ–≤–Ω—è 1** –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ –∏ –≤—ã–≤–æ–¥–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞  
‚úÖ **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —É—Ä–æ–≤–Ω—è 2** –Ω–µ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∏–Ω–∞–Ω—Å–∞–º  
‚úÖ **–í—Å–µ –ø–ª–∞—Ç–µ–∂–∏** –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** –≤—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ API  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –ø–æ–ª–Ω–∞—è –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (Stripe, PayPal –∏ —Ç.–¥.).

---

**–°–æ–∑–¥–∞–Ω–æ:** 11 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready
